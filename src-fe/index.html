<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Ligeia - Ambient Soundscape Mixer (Test Move)</title>
    
    <!-- Tailwind CSS CDN with JIT compilation -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Ligeia color palette
                        'bg': '#1a1a1a',
                        'card': '#2a2a2a', 
                        'text': '#ffffff',
                        'accent': '#4caf50',
                        'border': '#444444',
                        'hover': '#333333',
                        'muted': '#888888',
                    },
                    animation: {
                        'slide-in-up': 'slideInUp 0.3s ease-out',
                        'slide-out-right': 'slideOutRight 0.3s ease-in',
                        'pulse-glow': 'pulseGlow 1s infinite alternate',
                        'highlight-pulse': 'highlightPulse 2s ease-in-out',
                    },
                    keyframes: {
                        slideInUp: {
                            'from': { opacity: '0', transform: 'translateY(20px)' },
                            'to': { opacity: '1', transform: 'translateY(0)' }
                        },
                        slideOutRight: {
                            'from': { opacity: '1', transform: 'translateX(0)' },
                            'to': { opacity: '0', transform: 'translateX(100px)' }
                        },
                        pulseGlow: {
                            'from': { boxShadow: '0 0 5px rgba(76, 175, 80, 0.3)' },
                            'to': { boxShadow: '0 0 15px rgba(76, 175, 80, 0.6)' }
                        },
                        highlightPulse: {
                            '0%': { boxShadow: '0 0 0 2px rgba(255, 193, 7, 0.3)' },
                            '50%': { boxShadow: '0 0 0 4px rgba(255, 193, 7, 0.5)' },
                            '100%': { boxShadow: '0 0 0 2px rgba(255, 193, 7, 0.3)' }
                        }
                    },
                    minWidth: {
                        '75': '300px',
                    },
                    gridTemplateColumns: {
                        'auto-fill-280': 'repeat(auto-fill, minmax(280px, 1fr))',
                        'auto-fill-240': 'repeat(auto-fill, minmax(240px, 1fr))',
                        'auto-fill-200': 'repeat(auto-fill, minmax(200px, 1fr))',
                        'auto-fill-180': 'repeat(auto-fill, minmax(180px, 1fr))',
                    }
                }
            }
        }
    </script>
    
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="drag-drop.css" />
    <!-- SortableJS removed - using only mouse-based drag and drop -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0/dist/fuse.min.js"></script>
    <script src="https://unpkg.com/infinite-scroll@4/dist/infinite-scroll.pkgd.min.js"></script>
    <script type="importmap">
    {
        "imports": {
            "@tauri-apps/api/core": "./node_modules/@tauri-apps/api/core.js",
            "@tauri-apps/api/path": "./node_modules/@tauri-apps/api/path.js",
            "@tauri-apps/api/event": "./node_modules/@tauri-apps/api/event.js",
            "@tauri-apps/api/window": "./node_modules/@tauri-apps/api/window.js",
            "@tauri-apps/api/app": "./node_modules/@tauri-apps/api/app.js",
            "@tauri-apps/plugin-dialog": "./node_modules/@tauri-apps/plugin-dialog/dist-js/index.js",
            "@tauri-apps/plugin-fs": "./node_modules/@tauri-apps/plugin-fs/dist-js/index.js",
            "@tauri-apps/plugin-log": "./node_modules/@tauri-apps/plugin-log/dist-js/index.js"
        }
    }
    </script>
    <script>
        window.__TAURI_INTERNALS__ = window.__TAURI_INTERNALS__ || {};
        
        // Global error handler to catch MIME type errors and other issues
        window.addEventListener('error', function(event) {
            console.error('ðŸ”¥ GLOBAL ERROR:', event.error);
            console.error('ðŸ”¥ GLOBAL ERROR MESSAGE:', event.message);
            console.error('ðŸ”¥ GLOBAL ERROR FILENAME:', event.filename);
            console.error('ðŸ”¥ GLOBAL ERROR LINE/COL:', event.lineno, event.colno);
            console.error('ðŸ”¥ GLOBAL ERROR STACK:', event.error?.stack);
        });
        
        // Unhandled promise rejection handler
        window.addEventListener('unhandledrejection', function(event) {
            console.error('ðŸ”¥ UNHANDLED PROMISE REJECTION:', event.reason);
            console.error('ðŸ”¥ UNHANDLED PROMISE REJECTION STACK:', event.reason?.stack);
        });
        
    </script>
</head>
<body class="bg-bg text-text m-0 p-0 font-sans">
    <!-- Main App Container -->
    <div class="app flex flex-col h-screen bg-bg">
        <div id="header-container" class="flex-shrink-0"></div>
        
        <!-- Main Content Area -->
        <main class="main flex-1 flex overflow-hidden transition-all duration-300">
            <!-- Sidebar -->
            <div id="sidebar-container" class="flex-shrink-0 w-80 bg-card border-r border-border"></div>
            
            <!-- Sidebar Resizer -->
            <div id="sidebar-resizer" 
                 class="panel-resizer w-1 bg-border hover:bg-accent transition-colors cursor-col-resize" 
                 aria-hidden="false"></div>
            
            <!-- Atmosphere Membership Container -->
            <div id="membership-container" class="hidden bg-card border-r border-border"></div>
            
            <!-- Membership Resizer -->
            <div id="membership-resizer" 
                 class="panel-resizer hidden w-1 bg-border hover:bg-accent transition-colors cursor-col-resize" 
                 aria-hidden="true"></div>
            
            <!-- Virtual Folders Panel -->
            <div id="virtual-folders-panel" 
                 class="main-panel hidden bg-bg rounded-lg overflow-hidden h-full">
            </div>
            
            <!-- Panel Resize Handle (for Virtual Folders) -->
            <div class="panel-resize-handle w-1.5 bg-border cursor-col-resize relative 
                        flex-none items-center justify-center transition-all duration-200 z-10
                        hover:bg-accent hover:w-2 hover:shadow-lg hover:shadow-accent/40 hidden">
                <div class="resize-handle-grip w-0.5 h-10 bg-white/30 rounded-sm opacity-70 transition-all duration-200"></div>
            </div>
            
            <!-- Mixer Container -->
            <div id="mixer-container" class="flex-1">
            </div>
        </main>
    </div>
    
    <!-- Audio Container -->
    <div id="audioContainer" class="hidden"></div>
    
    <!-- Modals Container -->
    <div id="modals-container" class="fixed inset-0 z-50 pointer-events-none"></div>
    
    <!-- Atmosphere Diff Overlay -->
    <div id="atmoDiffOverlay" 
         class="atmo-diff-overlay hidden fixed inset-0 bg-black/70 flex items-center justify-center z-40" 
         aria-hidden="true"></div>
    
    <!-- Notifications Container -->
    <div id="notifications-container" 
         class="notifications-container fixed top-4 right-4 z-50 space-y-2"></div>
    
    <script type="module" src="main-template.js"></script>
</body>
</html>