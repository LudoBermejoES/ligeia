<div id="tagEditorModal" class="modal-overlay" style="display: none;">
  <div class="modal-container">
    <div class="modal-header">
      <div class="modal-title-section">
        <h2>Edit Audio Tags</h2>
        <div class="editing-track-info">
          <span class="track-name" id="editingTrackName">Unknown Track</span>
          <span class="track-path" id="editingTrackPath"></span>
        </div>
      </div>
      <button class="modal-close" id="closeTagEditor">Ã—</button>
    </div>
    <div class="modal-body">
      <form id="tagEditorForm">
        <!-- Identification -->
        <div class="tag-section">
          <h3>Identification</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="tag-title">Title</label>
              <input type="text" id="tag-title" name="title" />
            </div>
            <div class="form-group">
              <label for="tag-artist">Artist</label>
              <input type="text" id="tag-artist" name="artist" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="tag-album">Album</label>
              <input type="text" id="tag-album" name="album" />
            </div>
            <div class="form-group">
              <label for="tag-album-artist">Album Artist</label>
              <input type="text" id="tag-album-artist" name="album_artist" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="tag-genre">Genre (semicolon-separated)</label>
              <input type="text" id="tag-genre" name="genre" placeholder="ambient; horror; orchestral:cinematic" />
            </div>
            <div class="form-group">
              <label for="tag-year">Year</label>
              <input type="number" id="tag-year" name="year" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="tag-track-number">Track #</label>
              <input type="number" id="tag-track-number" name="track_number" />
            </div>
            <div class="form-group">
              <label for="tag-total-tracks">Total Tracks</label>
              <input type="number" id="tag-total-tracks" name="total_tracks" />
            </div>
          </div>
        </div>

        <!-- Credits -->
        <div class="tag-section">
          <h3>Credits</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="tag-composer">Composer</label>
              <input type="text" id="tag-composer" name="composer" />
            </div>
            <div class="form-group">
              <label for="tag-conductor">Conductor</label>
              <input type="text" id="tag-conductor" name="conductor" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="tag-producer">Producer</label>
              <input type="text" id="tag-producer" name="producer" />
            </div>
            <div class="form-group">
              <label for="tag-remixer">Remixer</label>
              <input type="text" id="tag-remixer" name="remixer" />
            </div>
          </div>
        </div>

        <!-- Content -->
        <div class="tag-section">
          <h3>Content</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="tag-bpm">BPM</label>
              <input type="number" id="tag-bpm" name="bpm" />
            </div>
            <div class="form-group">
              <label for="tag-initial-key">Key</label>
              <input type="text" id="tag-initial-key" name="initial_key" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="tag-mood">Mood (semicolon-separated)</label>
              <input type="text" id="tag-mood" name="mood" placeholder="ominous; atmospheric; mysterious" />
            </div>
            <div class="form-group">
              <label for="tag-language">Language</label>
              <input type="text" id="tag-language" name="language" />
            </div>
          </div>
        </div>

        <!-- Legal -->
        <div class="tag-section">
          <h3>Legal & Copyright</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="tag-copyright">Copyright</label>
              <input type="text" id="tag-copyright" name="copyright" />
            </div>
            <div class="form-group">
              <label for="tag-publisher">Publisher</label>
              <input type="text" id="tag-publisher" name="publisher" />
            </div>
          </div>
        </div>

        <!-- RPG Tags -->
        <div class="tag-section">
          <h3>RPG Tags (TXXX Frames)</h3>
          <div class="form-row">
            <div class="form-group">
              <label for="tag-rpg-occasions">Occasions (semicolon-separated)</label>
              <input type="text" id="tag-rpg-occasions" name="rpg_occasions" placeholder="exploration; combat; scene-transition" />
            </div>
            <div class="form-group">
              <label for="tag-rpg-quality">Quality</label>
              <input type="text" id="tag-rpg-quality" name="rpg_quality" placeholder="High" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group full-width">
              <label for="tag-rpg-keywords">Keywords (semicolon-separated)</label>
              <input type="text" id="tag-rpg-keywords" name="rpg_keywords" placeholder="biome:forest; util:loopable; style:cinematic" />
            </div>
          </div>
          <div class="rpg-note">
            <small>Note: These will be written as TXXX:Occasion, TXXX:Keywords, and TXXX:Quality frames in the audio file according to TAGS.md specification.</small>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" id="cancelTagEdit">Cancel</button>
      <button type="button" class="btn btn-primary" id="saveTagEdit">Save Changes</button>
    </div>
  </div>
</div>
